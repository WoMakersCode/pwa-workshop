(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{169:function(t,e,s){t.exports=s.p+"assets/img/service-worker-setup.84b2c4b3.png"},170:function(t,e,s){t.exports=s.p+"assets/img/sw-lifecycle.1d49eede.png"},171:function(t,e,s){t.exports=s.p+"assets/img/sw-waiting.0b9f4663.png"},172:function(t,e,s){t.exports=s.p+"assets/img/devtools-update-on-reload.d1d00b91.png"},173:function(t,e,s){t.exports=s.p+"assets/img/certs.7e43f7a2.png"},174:function(t,e,s){t.exports=s.p+"assets/img/certok.41829eb4.png"},205:function(t,e,s){"use strict";s.r(e);var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"etape-2-installation-d-un-service-worker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#etape-2-installation-d-un-service-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" Etape 2 : Installation d'un Service Worker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"introduction-aux-web-worker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction-aux-web-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" Introduction aux Web Worker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Comme vous le savez peut-√™tre, JavaScript est √† thread unique et ne permet pas la cr√©ation de nouveaux threads.\nUn Web Workers permet d'ex√©cuter du code dans un thread s√©par√© pour une utilisation g√©n√©rale.\nLe code du worker r√©side g√©n√©ralement dans un fichier JavaScript distinct du code JavaScript principal.\nApr√®s avoir cr√©√© le Web Worker, nous avons deux threads JavaScript: celui du JavaScript principal et celui du Web Worker.\nUne fois le worker cr√©√©, il peut interagir avec le code JavaScript principal de mani√®re bidirectionnelle √† l'aide de la fonction "),e("code",[this._v("postMessage")]),this._v(" et de l'√©v√®nement "),e("code",[this._v("message")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("main.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Web Worker example"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onclick")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sendMessageToWorker()"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Post message to worker"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onclick")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("askWorkerToPerformRecurringTask()"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Launch recurring task"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Worker result"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// crate a worker whose code is defined in the file passed as parameter")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Worker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"worker.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("askWorkerToPerformRecurringTask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// post a sting to the worker")]),t._v("\n    worker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"recurring"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessageToWorker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// post a sting to the worker")]),t._v("\n    worker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World !"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This event is fired when the worker posts a message")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The value of the message is in messageEvent.data")]),t._v("\nworker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("messageEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" div "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Log the received message on the top of the tag")]),t._v("\n    div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" messageEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<br>"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" div"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a function that generates a random number every second and posts it to the main JavaScript")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateNumbers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// post a message to the main JavaScript")]),t._v("\n        self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This event is fired when the worker recieves a message from the main JavaScript")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The value of the message is in messageEvent.data")]),t._v("\nself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("messageEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("messageEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"recurring"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// If the value of the event is "recurring", we launch the above function')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateNumbers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Post a message back to the main JS")]),t._v("\n        self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello to you too !"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"ajout-d-un-service-worker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ajout-d-un-service-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" Ajout d'un Service Worker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("Ce sont des workers cod√©s en JavaScript. Ils s'√©x√©cutent dans un thread distinct du script applicatif et ne peuvent pas acc√©der au DOM ni aux variables globales, mais l'application peut communiquer avec le worker gr√¢ce √† l'API "),e("code",[this._v("postMessage")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Dans le dossier "),e("code",[this._v("app")]),this._v(", cr√©ez un fichier "),e("code",[this._v("sw.js")]),this._v(" vide (pour l'instant). Il contiendra le code de votre Service Worker.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"enregistrement-du-service-worker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#enregistrement-du-service-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" Enregistrement du Service Worker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Avant d'utiliser un Service Worker, il faut le faire enregistrer par l'application. On enregistre g√©n√©ralement le Service Worker au chargement de la page. Dans le fichier "),e("code",[this._v("scripts.js")]),this._v(", compl√©tez la fonction appel√©e au chargement du document avec le code suivant :")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'serviceWorker'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" navigator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  navigator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serviceWorker\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/sw.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("serviceWorker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Service Worker registered: '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" serviceWorker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Error registering the Service Worker: '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Service Worker registered: [object ServiceWorkerRegistration]\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Cela signifie que le Service Worker a bien √©t√© enregistr√©. On peut v√©rifier cela en regardant dans l'onglet "),e("strong",[this._v("Application")]),this._v(" des Chrome Developer Tools, puis dans la sous-section "),e("strong",[this._v("Service Workers")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(169),alt:"Service Worker bien install√©",title:"Cycle de vie du Service Worker"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"cycle-de-vie-du-service-worker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cycle-de-vie-du-service-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" Cycle de vie du Service Worker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(170),alt:"Cycle de vie du Service Worker",title:"Cycle de vie du Service Worker"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Les premi√®res √©tapes sont l'installation et l'activation. V√©rifions cela en ajoutant le code suivant dans le fichier "),e("em",[this._v("sw.js")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'install'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Service Worker installing.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nself"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'activate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Service Worker activating.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Service Worker registered [object ServiceWorkerRegistration]\nService Worker installing.\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(171),alt:"Service Worker en attente d'installation",title:"Service Worker en attente"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Quand on rafra√Æchit la page, le navigateur essaie d'installer puis d'activer le Service Worker avec le nouveau code. Comme ce dernier est diff√©rent du Service Worker actif, celui enregistr√© au d√©but de l'√©tape 2, l'activation du nouveau Service Worker est suspendue. Dans ce cas, il est mis en attente et ne sera install√© que si le pr√©c√©dent Service Worker ne contr√¥le plus aucun client. On a deux solutions dans ce cas: soit fermer tous les onglets control√©s par le premier Service Worker ou bien cliquer sur le lien "),e("strong",[this._v("skipWaiting")]),this._v(" dans les outils d√©veloppeur.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Cliquez sur le lien "),e("strong",[this._v("skipWaiting")]),this._v(". On remarque que l'ancien Service Worker a disparu et que celui qui √©tait en attente prend sa place. Le log d'activation s'affiche √©galement.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Service Worker activating.\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Ce comportement est n√©cessaire pour g√©rer les mont√©es de version des Service Workers en production. En pratique, vous aurez √† √©crire du code dans le Service Worker pour g√©rer ce processus de mise √† jour et appeler "),e("code",[this._v("skipWaiting")]),this._v(" programmatiquement une fois que tout est pr√™t.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Pendant le d√©veloppement toutefois, on peut s'en passer en cochant la case "),e("strong",[this._v("Update on reload")]),this._v(". Cette option permet d'activer imm√©diatement les futurs nouveaux Service Workers. C'est un √©quivalent d'un clic automatique sur "),e("strong",[this._v("skipWaiting")]),this._v(" √† chaque fois.")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("Activez l'option "),a("strong",[t._v("Update on reload")]),t._v(" lorsque vous travaillez sur le code d'un Service Worker pour toujours disposer de la derni√®re version.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(172),alt:"Update on reload"}})]),t._v(" "),a("p",[t._v("Attention toutefois, cette option installera et activera le Service Worker "),a("strong",[t._v("avant")]),t._v(" d'afficher la page, ce qui ne vous permettra pas de voir les logs associ√©s √† ces √©v√®nements en console.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"bibliotheque-de-compatibilite-pwa"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bibliotheque-de-compatibilite-pwa","aria-hidden":"true"}},[this._v("#")]),this._v(" biblioth√®que de compatibilit√© PWA")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://cdn.jsdelivr.net/npm/pwacompat@2.0.8/pwacompat.min.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("integrity")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sha384-uONtBTCBzHKF84F6XvyC8S0gL8HTkAPeCyBNvfLfsqHh+Kd6s/kaS4BdmNQ5ktp1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("crossorigin")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("anonymous"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"developpement-local-avec-ssl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#developpement-local-avec-ssl","aria-hidden":"true"}},[this._v("#")]),this._v(" D√©veloppement local avec SSL")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("Lancer "),e("code",[this._v("mkcert -install")]),this._v(" Pour installer une CA (Autorit√© de certification)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('Created a new local CA at "/Users/****/Library/Application Support/mkcert" üí•\nThe local CA is now installed in the system trust store! ‚ö°Ô∏è\nThe local CA is now installed in the Firefox trust store (requires browser restart)! ü¶ä\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("cd jusqu'√† la racine du site")]),this._v(" "),e("li",[this._v("Lancer cette commande qui g√©n√®re les certificats pour notre serveur de dev: "),e("code",[this._v("mkcert localhost 127.0.0.1 ::1")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-console extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('Using the local CA at "/Users/****yassinebenabbas****/Library/Application Support/mkcert" ‚ú®\n\nCreated a new certificate valid for the following names üìú\n - "localhost"\n - "127.0.0.1"\n - "::1"\n\nThe certificate is at "./localhost+2.pem" and the key at "./localhost+2-key.pem" ‚úÖ\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Nous aurons deux fichiers PEM. Ceux-ci seront utilis√©s par notre serveur de d√©veloppement compatible SSL.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(173),alt:"certs"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Installer la commande "),e("code",[this._v("http-server")]),this._v(". "),e("code",[this._v("npm i -g http-server")])]),this._v(" "),e("li",[this._v("Lancer le serveur en mode SSL "),e("code",[this._v('http-server -S -o -C "localhost+2.pem" -K "localhost+2-key.pem"')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(174),alt:"certs"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Dans cette partie, nous avons vu comment installer un Service Worker.\nOn a √©galement g√©r√© deux √©v√®nements du cycle de vie du Service Worker: "),e("strong",[this._v("install")]),this._v(" et "),e("strong",[this._v("activate")]),this._v(". Nous allons maintenant voir comment faire quelque-chose d'utile avec ce Service Worker.")])}],n=s(0),r=Object(n.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("Avant de nous lancer dans les Services Workers, regardons d'abord en quoi consiste les Web Worker.")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("√âtant donn√© que le travailleur Web dispose de son propre thread, il peut effectuer des t√¢ches exigeant beaucoup de processus sans geler la page.")]),t._v(" "),s("p",[t._v("Voici une page Web minimale qui a cr√©√© un agent de service et qui communique avec lui.")]),t._v(" "),t._m(3),s("p",[t._v("Voici le code qui cr√©e le worker et qui communique avec lui.")]),t._v(" "),t._m(4),s("p",[t._v("Enfin, voici le code du Web Worker qui r√©agit au message re√ßu du JS principal en publiant un seul message ou en affichant un nombre al√©atoire toutes les secondes.")]),t._v(" "),t._m(5),s("p",[t._v("Vous pouvez essayer cette page "),s("a",{attrs:{href:"https://pwa-workshop.js.org/samples/worker01/",target:"_blank",rel:"noopener noreferrer"}},[t._v("en suivant ce lien"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Ceci conclut cette introduction courte aux Web Workers.")]),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("Les "),s("a",{attrs:{href:"https://developers.google.com/web/fundamentals/primers/service-workers/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Workers"),s("OutboundLink")],1),t._v(" constituent une API assez vaste et pr√©sentant beaucoup de potentiel. Dans le cadre d'une PWA, le Service Worker va principalement nous permettre de d√©finir une strat√©gie de mise en cache et ainsi mieux g√©rer les connexions capricieuses, voire un mode offline complet pour notre application.")]),t._v(" "),s("p",[t._v("Ce que vous devez retenir au sujet des Service Workers:")]),t._v(" "),s("ul",[t._m(7),t._v(" "),s("li",[t._v("Ils peuvent √™tre consid√©r√©s comme des proxy r√©seau programmables. En effet, ils permettent d'intercepter les requ√™tes r√©seau en partance du navigateur et de personnaliser les r√©ponses.")]),t._v(" "),s("li",[t._v("Ils ont un cycle de vie ind√©pendant de l'application web associ√©e. Ils s'arr√™tent lorsqu'ils ne sont pas utilis√©s et red√©marrent au besoin.")]),t._v(" "),s("li",[t._v("Ils peuvent fonctionner sans que l'application web associ√©e tourne, ce qui permet certaines fonctionnalit√©s in√©dites comme l'envoi de notifications Push.")]),t._v(" "),s("li",[t._v("Plusieurs API sont disponibles au sein du Service Worker pour persister les donn√©es localement, par exemple l'"),s("a",{attrs:{href:"https://developer.mozilla.org/fr/docs/Web/API/Cache",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("API Cache")]),s("OutboundLink")],1),t._v(" et l'"),s("a",{attrs:{href:"https://developer.mozilla.org/fr/docs/Web/API/API_IndexedDB",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("API IndexedDB")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("li",[t._v("La plupart des API associ√©es sont bas√©es sur l'utilisation des promesses ("),s("a",{attrs:{href:"https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Promise")]),s("OutboundLink")],1),t._v(").")])]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),s("p",[t._v("Rechargez la page, le log suivant devrait apparaitre une fois la page charg√©e.")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),s("p",[t._v("Nous allons voir dans le section qui suite ce qui se passe apr√®s l'enregistrement d'un Service Worker.")]),t._v(" "),t._m(15),t._v(" "),s("p",[t._v("Quand on enregistre un Service Worker, son cycle de vie d√©marre. Le sch√©ma suivant repr√©sente les diff√©rentes √©tapes du cycle de vie d'un Service Worker ("),s("a",{attrs:{href:"https://developers.google.com/web/fundamentals/primers/service-workers/",target:"_blank",rel:"noopener noreferrer"}},[t._v("source"),s("OutboundLink")],1),t._v(").")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),s("p",[t._v("Rechargez la page et v√©rifier les logs. Curieusement, on ne voit que le log d'installation.")]),t._v(" "),t._m(19),s("p",[t._v("Regardons ce qui se passe dans la section Service Worker des Dev Tools. Un affichage similaire √† la capture suivante devrait apparaitre:")]),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),s("p",[t._v("Quand on rafra√Æchit la page sans modifier le Service Worker, on remarque qu'on ne passe plus par les √©tapes d'installation et d'activation.")]),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),s("p",[t._v("Comme la technologie Progressive Web Apps est r√©cente et en √©volution, certains navigateurs ne supportent pas encore certaines fonctionnalit√©s.\nPar exemple, Safari 12 mobile ne prend pas en charge l'√©cran d‚Äôaccueil (ou splash-screen).\n[pwacomat] (https://github.com/GoogleChromeLabs/pwacompat) de Google Chrome Labs r√©sout ce probl√®me en ajoutant simplement une balise de script dans le fichier html.")]),t._v(" "),t._m(28),s("p",[t._v("Nous vous recommandons vivement d‚Äôajouter ce script √† vos PWA pour une meilleure compatibilit√©.")]),t._v(" "),t._m(29),t._v(" "),s("p",[t._v("PWA n√©cessite l'utilisation de HTTPS. Ce n‚Äôest pas probl√©matique pour un PWA d√©ploy√© car la plupart des h√©bergeurs supportent HTTPS.\nCependant, ce n'est pas aussi simple pour d√©veloppement local.\nEn effet, il faut pour cela g√©n√©rer et installer manuellement des certificats dans le magasin de certificats.\nHeureusement, il existe un outil CLI int√©ressant appel√© "),s("a",{attrs:{href:"https://mkcert.dev/",target:"_blank",rel:"noopener noreferrer"}},[t._v("mkcert"),s("OutboundLink")],1),t._v(" qui simplifie ces √©tapes.")]),t._v(" "),s("p",[t._v("Configurons notre serveur HTTPS local en proc√©dant comme suit:")]),t._v(" "),s("ul",[s("li",[t._v("Installer "),s("a",{attrs:{href:"https://github.com/FiloSottile/mkcert#installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("mkcert"),s("OutboundLink")],1),t._v(" en suivant les instruction indiqu√©es dans le GitHub")]),t._v(" "),t._m(30)]),t._v(" "),t._m(31),t._m(32),t._v(" "),t._m(33),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),s("p",[t._v("Et voil√†, on est bien en HTTPs en local. C'est le top !")]),t._v(" "),t._m(37),t._v(" "),t._m(38)])},a,!1,null,null,null);e.default=r.exports}}]);